# μλ™ λ¦¬μ†μ¤ λ‹«κΈ°(try-with-resource)

κΈ°μ΅΄ μ…μ¶λ ¥, μ¤νΈλ¦Ό, dbμ—°κ²°κ³Ό κ°™μ€ λ¦¬μ†μ¤ μμ›μ„ μ‚¬μ©ν• ν›„μ— finallyλ¥Ό ν†µν•΄ λ…μ‹μ μΌλ΅ λ‹«μ•„μ£Όμ–΄μ•Όν–μ§€λ§, μλ°”7μ΄ν›„ μ΄λ¥Ό κ°„νΈν•κ² μ²λ¦¬ν•κΈ°μ„ν•΄ try λ¬Έμ κ΄„νΈ μ•μ— λ¦¬μ†μ¤ μμ›μ„ μ„ μ–Έν•κ³  μ‚¬μ©ν• ν›„, try λΈ”λ΅μ„ λ²—μ–΄λ‚  λ• μλ™μΌλ΅ ν•΄λ‹Ή μμ›μ„ λ‹«μ•„μ£Όλ” κΈ°λ¥μ„ μ κ³µ.

```java
try (BufferedReader reader = new BufferedReader(new FileReader("file.txt"))) {
	...
} catch (IOException e) {
	// μμ™Έ μ²λ¦¬
}
```

- try λΈ”λ΅μ΄ μ •μƒμ μΌλ΅ μ‹¤ν–‰μ„ μ™„λ£ν–κ±°λ‚ νΉμ€ μ¤‘κ°„μ— μμ™Έκ°€ λ°μƒλλ©΄ μλ™μΌλ΅  BufferedReaderμ close() λ©”μ†λ“κ°€ νΈμ¶.
- try {} μ—μ„ μμ™Έκ°€ λ°μƒν•λ©΄ μ°μ„  close()λ΅ λ¦¬μ†μ¤λ¥Ό λ‹«κ³ , catch λΈ”λ΅μ„ μ‹¤ν–‰.

λ§μ•½ λ³µμκ°μ λ¦¬μ†μ¤λ¥Ό μ‚¬μ©ν•΄μ•Όν•λ‹¤λ©΄ λ‹¤μκ³Ό κ°™μ΄ μ‘μ„±κ°€λ¥.

```java
try (BufferedReader reader = new BufferedReader(new FileReader("file.txt"));
     BufferedWriter writer = new BufferedWriter(new FileWriter("file2.txt"))) {
} catch (IOException e) {
    // μμ™Έ μ²λ¦¬
}
```

```java
try (FileInputStream inputStream = new FileInputStream("file.txt");
     FileOutputStream outputStream = new FileOutputStream("file2.txt")) {
	...
} catch (IOException e) {
	// μμ™Έ μ²λ¦¬
}
```

### try-with-resource μ‚¬μ© μ΅°κ±΄

- λ¦¬μ†μ¤ κ°μ²΄λ” **java.lang.AutoCloseable** μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•κ³  μμ–΄μ•Ό ν•¨.
- AutoCloseableμ—λ” close() λ©”μ†λ“κ°€ μ •μλμ–΄ μλ”λ° try-with-resourcesλ” λ°”λ΅ μ΄ close() λ©”μ†λ“λ¥Ό μλ™ νΈμ¶ν•λ” λ°©μ‹.

μλ°” API λ„νλ¨ΌνΈμ—μ„ **AutoCloseable** μΈν„°νμ΄μ¤λ¥Ό μ°Ύμ•„μ„ β€All Known Implementing Classes:β€λ¥Ό λ³΄λ©΄ try-with-resourcesμ™€ ν•¨κ» μ‚¬μ©ν•  μ μλ” λ¦¬μ†μ¤κ°€ μ–΄λ–¤κ²ƒλ“¤μ΄ μλ”μ§€ μ• μ μμ.

[AutoCloseable (Java Platform SE 8 )](https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html)

try-with-resource μ‹¤ μ‚¬μ© μμ‹.

```java
public class FileInputStream implements AutoCloseable {
	private String file;
	public FileInputStream(String file) {
		this.file = file;
	}
	public void read() {
		System.out.println(file + " μ„ μ½μµλ‹λ‹¤");
	}
	@Override
	public void close() throws Exception {
		System.out.println(file + "μ„ λ‹«μµλ‹λ‹¤");
	}
}
```

```java
public class TryWithResourceExample {
	public static void main(String[] args) {
		try (FileInputStream fileInputStream = new FileInputStream("file.txt")){
			fileInputStream.read();   // "file"μ„ μ½μµλ‹λ‹¤.
			throw new Exception();		// κ°•μ μ μΌλ΅ μμ™Έ λ°μƒμ‹ν‚΄
		} catch (Exception e) {     // 
			System.out.println("μμ™Έ μ²λ¦¬ μ½”λ“κ°€ μ‹¤ν–‰λμ—μµλ‹λ‹¤.");
		}
	}
}
//file.txt μ„ μ½μµλ‹λ‹¤
//file.txtμ„ λ‹«μµλ‹λ‹¤
//μμ™Έ μ²λ¦¬ μ½”λ“κ°€ μ‹¤ν–‰λμ—μµλ‹λ‹¤.
```

# μ λ„¤λ¦­ μ‚¬μ©ν•λ” μ΄μ 

## μ λ„¤λ¦­μ΄λ€

μλ°”μ—μ„ μ λ„¤λ¦­μ΄λ€ νƒ€μ…(type) μ•μ „μ„±μ„ μ κ³µν•κ³ , μ½”λ“ μ¤‘λ³µμ„ μ¤„μ΄κΈ° μ„ν•΄ λ„μ…λ κΈ°λ¥μΌλ΅ ν΄λμ¤λ‚ λ©”μ†λ“μ—μ„ μ‚¬μ©ν•  λ°μ΄ν„° νƒ€μ…μ„ μ»΄νμΌ μ‹μ— λ―Έλ¦¬ μ§€μ •ν•  μ μλ” λ°©λ²•μ„ μ κ³µ.

- μ»΄νμΌμ‹ λ―Έλ¦¬ νƒ€μ…μ΄ μ •ν•΄μ§€κΈ° λ•λ¬Έμ—, νƒ€μ… κ²€μ‚¬λ‚ λ³€ν™ κ°™μ€ λ²κ±°λ΅μ΄ μ‘μ—…μ„ μƒλµ κ°€λ¥.
- μ»΄νμΌ μ‹κ°„μ— νƒ€μ… μ²΄ν¬λ¥Ό μν–‰ν•μ—¬ νƒ€μ… μ•μ „μ„±μ„ ν™•λ³΄ν•κ³ , νƒ€μ… λ³€ν™μ„ μ¤„μ—¬ μ½”λ“μ κ°€λ…μ„±κ³Ό μ¬μ‚¬μ©μ„±μ„ λ†’μΌ μ μμ.

## μ λ„¤λ¦­μ„ μ‚¬μ©ν•λ” μ΄μ 

ν•΄λ‹Ή νƒ€μ…μ„ μ΄μ©ν•¨μΌλ΅μ¨ μλ»λ νƒ€μ…μ΄ μ‚¬μ©λ  μ μλ” λ¬Έμ λ¥Ό μ»΄νμΌ κ³Όμ •μ—μ„ μ κ±° κ°€λ¥.

```java
List<Youtube> youtubeList = new ArrayList<Youtube>();

youtubeList.add(new Youtube());   
youtubeList.add(new DisneyPlus());   // μ»΄νμΌ μ—λ¬ λ°μƒ. Youtube μ™Έμ— λ‹¤λ¥Έ νƒ€μ… μ €μ¥λ¶κ°€
```

- μ„μ—μ„ ArrayListλ΅ μ„ μ–Έν• youtubeListλ” Youtube κ°μ²΄μ— λ€ν• λ©λ΅λ§ μ €μ¥ν•λ” list ν•νƒ.
- ν•μ§€λ§ λ‘λ²μ§Έ addμ—μ„ DisneyPlus κ°μ²΄λ¥Ό λ„£μΌλ ¤λ” μ‹λ„λ¥Ό ν–κΈ° λ•λ¬Έμ— μ»΄νμΌ μ—λ¬κ°€ λ°μƒ.
- μ λ„¤λ¦­μ€ **ν΄λμ¤**μ™€ **μΈν„°νμ΄μ¤**, κ·Έλ¦¬κ³  **λ©”μ†λ“λ¥Ό μ •μ**ν•  λ• **νƒ€μ…μ„ νλΌλ―Έν„°λ΅ μ‚¬μ©**ν•  μ μλ„λ΅ ν•¨.

### μ»΄νμΌμ‹ κ°•ν• νƒ€μ… μ²΄ν¬.

μ‹¤ν–‰ μ‹ νƒ€μ… μ—λ¬κ°€ λ°μƒν•λ” κ²ƒ λ³΄λ‹¤ μ»΄νμΌ λ‹¨κ³„μ—μ„ νƒ€μ… μ¤λ¥λ¥Ό λ°κ²¬ν•λ”κ² μ—λ¬ λ°©μ§€μ— μ λ¦¬. μλ°” μ»΄νμΌλ¬λ” μ½”λ“μ—μ„ μλ» μ‚¬μ©λ νƒ€μ… λ•λ¬Έμ— λ°μƒν•λ” λ¬Έμ μ μ„ μ κ±°ν•κΈ° μ„ν•΄ μ λ„¤λ¦­ μ½”λ“μ— λ€ν•΄ κ°•ν• νƒ€μ… μ²΄ν¬λ¥Ό ν†µν•΄ μ‚¬μ „μ— μ—λ¬λ¥Ό λ°©μ§€.

### νƒ€μ… λ³€ν™μ„ μ κ±°.

μ λ„¤λ¦­μ΄ μ μ©λμ§€ μ•μ€ ArrayListκ°μ²΄λ” λ¶ν•„μ”ν• νƒ€μ… λ³€ν™μ΄ ν•„μ”. Listμ— λ¬Έμμ—΄ μ”μ†λ¥Ό μ €μ¥ν–μ§€λ§, μ”μ†λ¥Ό μ°Ύμ•„μ¬ λ•μ—λ” list.get(i) νƒ€μ…μ΄ Objectμ΄λ―€λ΅ λ°λ“μ‹ StringμΌλ΅ νƒ€μ… λ³€ν™μ΄ ν•„μ”.

```java
List list = new ArrayList();
list.add("Hello");
String str = (String) list.get(0);
```

μ λ„¤λ¦­ μ‚¬μ©μ‹ Listμ— μ €μ¥λλ” μ”μ†κ°€ String νƒ€μ…μΌλ΅ μ •ν•΄μ§€κΈ° λ•λ¬Έμ— μ”μ†λ¥Ό μ°Ύμ•„μ¬ λ• λ³€ν™μ„ κ±°μΉμ§€ μ•κΈ° λ•λ¬Έμ— μ„±λ¥μ΄ ν–¥μƒ.

```java
List<String> list = new ArrayList<String>();
list.add("Hello");
String str = list.get(0);
```

# μ λ„¤λ¦­ νƒ€μ…(class<T>, Interface<T>)

μ λ„¤λ¦­ νƒ€μ…μ€ νƒ€μ…μ„ νλΌλ―Έν„°λ΅ κ°€μ§€λ” ν΄λμ¤μ™€ μΈν„°νμ΄μ¤λ¥Ό λ§ν•¨. ν΄λμ¤ λλ” μΈν„°νμ΄μ¤ λ’¤μ— `<>` λ¶€νΈκ°€ λ¶™κ³ , μ‚¬μ΄μ— νƒ€μ… νλΌλ―Έν„°κ°€ μ„μΉ.

```java
public class ν΄λμ¤λ…<T> { ... }
public interface μΈν„°νμ΄μ¤λ…<T> { ... }
```

νƒ€μ… νλΌλ―Έν„°λ” μΌλ°μ μΌλ΅ λ€λ¬Έμ μ•νλ²³ ν• κΈ€μ T(**T**ype)λ΅ ν‘ν„.

- `E`(Element), `K`(Key), `V`(Value), `N`(Number) λ“±μ΄ μμ.

ν΄λμ¤λ‚ λ©”μ†λ“λ” λ‹¤μ¤‘ νƒ€μ… νλΌλ―Έν„°λ¥Ό κ°€μ§ μ μμΌλ©°, κ°κ° μ½¤λ§λ΅ κµ¬λ¶„.

- `class Pair<K, V> { ... }`

μ •μ  λ©¤λ²„(static)λ” ν΄λμ¤μ νΉμ • μΈμ¤ν„΄μ¤μ— μ†ν•μ§€ μ•κΈ° λ•λ¬Έμ—, ν΄λμ¤ λ λ²¨μ μ λ„¤λ¦­ νƒ€μ… **`T`**λ¥Ό μ‚¬μ© λ¶κ°€.

μ‹¤μ  μ½”λ“μ—μ„ μ λ„¤λ¦­ νƒ€μ…μ„ μ‚¬μ©ν•λ ¤λ©΄ νƒ€μ… νλΌλ―Έν„°μ— κµ¬μ²΄μ μΈ νƒ€μ… μ§€μ •ν•„μ”.

```java
public class Box {
	private Object object;

	public void set(Object object) {
		this.object = object;
	}
	public Object get() {
		return object;
	}
}
```

Box ν΄λμ¤μ ν•„λ“ νƒ€μ…μ΄ ObjectμΈλ°, Object νƒ€μ…μΌλ΅ μ„ μ–Έν• μ΄μ λ” ν•„λ“μ— λ¨λ“  μΆ…λ¥μ κ°μ²΄λ¥Ό μ €μ¥ν•κ³ μ‹¶μ–΄μ„ μ…λ‹λ‹¤.

Object ν΄λμ¤λ” λ¨λ“  μλ°” ν΄λμ¤μ μµμƒμ„ λ¶€λ¨ ν΄λμ¤λΌμ„ μμ‹ κ°μ²΄λ” λ¶€λ¨ νƒ€μ…μ— λ€μ…ν•  μ μλ‹¤λ” μ„±μ§ λ•λ¬Έμ— λ¨λ“  μλ°” κ°μ²΄λ” Object νƒ€μ…μΌλ΅ μλ™ νƒ€μ… λ³€ν™λμ–΄ μ €μ¥.

```java
Object object = μλ°”μ λ¨λ“  κ°μ²΄;
```

1. set() λ©”μ†λ“λ” λ§¤κ° λ³€μ νƒ€μ…μΌλ΅ Objectλ¥Ό μ‚¬μ©ν•λ©΄μ„ λ¨λ“  κ°μ²΄λ¥Ό λ§¤κ°λ³€μλ΅ λ°›μ„ μ μκ² ν–κ³ , λ°›μ€ λ§¤κ°λ³€μκ°’μ„ Object ν•„λ“μ— μ €μ¥.
2. get() λ©”μ†λ“λ” Object ν•„λ“μ— μ €μ¥λ κ°μ²΄λ¥Ό Object νƒ€μ…μΌλ΅ λ¦¬ν„΄.
3. λ§μ•½ ν•„λ“μ— μ €μ¥λ μ›λ νƒ€μ…μ κ°μ²΄λ¥Ό μ–»μΌλ ¤λ©΄ λ‹¤μκ³Ό κ°™μ΄ κ°•μ  νƒ€μ… λ³€ν™μ΄ ν•„μ”.

```java
Box box = new Box();
box.set("hello");                 // String νƒ€μ…μ„ Object νƒ€μ…μΌλ΅ μλ™ νƒ€μ… λ³€ν™ν•΄μ„ μ €μ¥
String str = (String) box.get();  // Object νƒ€μ…μ„ String νƒ€μ…μΌλ΅ κ°•μ  νƒ€μ… λ³€ν™ν•΄μ„ μ–»μ
```

λ¨λ“  μΆ…λ¥μ κ°μ²΄λ¥Ό μ €μ¥ν•λ©΄μ„ νƒ€μ… λ³€ν™μ΄ λ°μƒν•μ§€ μ•λ„λ΅ ν•λ” ν•΄κ²°μ±…μ€ μ λ„¤λ¦­.

```java
public class Box<T> {
	private T t;
	
	public T get() {
		return t;
	}
	public void set(T t) {
		this.t = t;
	}
}
```

νƒ€μ… νλΌλ―Έν„° Tλ¥Ό μ‚¬μ©ν•΄μ„ Object νƒ€μ…μ„ λ¨λ‘ Tλ΅ λ€μ²΄ν•¨. Tλ” Box ν΄λμ¤λ΅ κ°μ²΄λ¥Ό μƒμ„±ν•  λ• κµ¬μ²΄μ μΈ νƒ€μ…μΌλ΅ λ³€κ²½.

```java
Box<String> box = new Box<String>();
```

νƒ€μ… νλΌλ―Έν„° Tλ” String νƒ€μ…μΌλ΅ λ³€κ²½λμ–΄ Box ν΄λμ¤μ λ‚΄λ¶€λ” λ‹¤μκ³Ό κ°™μ΄ μλ™μΌλ΅ μ¬κµ¬μ„±.

```java
public class Box<String> {
	private String t;

	public String get() {
		return t;
	}
	public void set(String t) {
		this.t = t;
	}
}
```

ν•„λ“ νƒ€μ…μ΄ StringμΌλ΅ λ³€κ²½λμ—κ³ , set() λ©”μ†λ“λ„ String νƒ€μ…λ§ λ§¤κ°κ°’μΌλ΅ λ°›μ„ μ μκ² λ³€κ²½λμ—κ³ , get() λ©”μ†λ“ μ—­μ‹ String νƒ€μ…μΌλ΅ λ¦¬ν„΄ν•λ„λ΅ λ³€κ²½λ¨.

κ·Έλμ„ λ‹¤μ μ½”λ“λ¥Ό λ³΄λ©΄ μ €μ¥ν•  λ•μ™€ μ½μ–΄μ¬ λ• μ „ν€ νƒ€μ… λ³€ν™μ΄ λ°μƒν•μ§€ μ•μ.

```java
Box<String> box = new Box<String>();
box.set("hello");       
String str = box.get(); 
```

μ΄μ™€κ°™μ΄ μ λ„¤λ¦­μ€ ν΄λμ¤λ¥Ό μ„¤κ³„ν•  λ• κµ¬μ²΄μ μΈ νƒ€μ…μ„ λ…μ‹ν•μ§€ μ•κ³ , νƒ€μ… νλΌλ―Έν„°λ΅ λ€μ²΄ν•μ—¬, μ‹¤μ  ν΄λμ¤κ°€ μ‚¬μ©λ  λ• κµ¬μ²΄μ μΈ νƒ€μ…μ„ μ§€μ •ν•¨μΌλ΅μ¨ νƒ€μ… λ³€ν™μ„ μµμ†ν™”μ‹ν‚΄.

```java
public class Box<T> {
	private T t;
	
	public T get() {
		return t;
	}
	
	public void set(T t) {
		this.t = t;
	}
}
```

```java
//ν™μ© μμ‹
public class GenericExample {
    public static void main(String[] args) {
        Box<String> box = new Box<>();
        box.set("hello");

        String str = box.get();
        System.out.println(str);

        Box<Integer> box2 = new Box<>();
        box2.set(9);

        int value = box2.get();
        System.out.println(value);
    }
```

```
π’΅ ν•λ£¨ 10κ° μ§λ¬Έ
```

| λ²νΈ | μ§λ¬Έ |
| --- | --- |
| 1 | try-with-resourcesμ κΈ°λ¥μ΄ λ¬΄μ—‡μ΄κ³ , μ–΄λ–¤ μƒν™©μ—μ„ μ‚¬μ©ν•λ‚μ”? |
| 2 | AutoCloseable μΈν„°νμ΄μ¤λ” λ¬΄μ—‡μ΄κ³ , try-with-resourcesμ™€ μ–΄λ–¤ κ΄€λ ¨μ΄ μλ‚μ”? |
| 3 | try-with-resourcesκ°€ κΈ°μ΅΄μ try-catch-finally μ ‘κ·Ό λ°©μ‹μ— λΉ„ν•΄ κ°€μ§€λ” μ΄μ μ€ λ¬΄μ—‡μΈκ°€μ”? |
| 4 | try-with-resourcesλ¥Ό μ‚¬μ©ν•λ” κ²½μ°μ™€ μ‚¬μ©ν•μ§€ μ•λ” κ²½μ°μ μ°¨μ΄μ μ€ λ¬΄μ—‡μΈκ°€μ”? |
| 5 | μ λ„¤λ¦­μ΄λ€ λ¬΄μ—‡μ΄κ³ , μ–΄λ–¤ μ΄μ λ΅ μ‚¬μ©ν•λ‚μ”? |
| 6 | μ λ„¤λ¦­ νƒ€μ…μ—μ„ μ™€μΌλ“μΉ΄λ“(?)λ¥Ό μ‚¬μ©ν•λ” κ²½μ°μ™€ κ·Έ μ΄μ μ— λ€ν•΄ μ„¤λ…ν•  μ μλ‚μ”? |
| 7 | μ λ„¤λ¦­ νƒ€μ…μ„ μ‚¬μ©ν•μ§€ μ•μ•μ„ λ• λ°μƒν•  μ μλ” λ¬Έμ μ μ€ λ¬΄μ—‡μΈκ°€μ”? |
| 8 | νƒ€μ… νλΌλ―Έν„°μ— λ€ν•΄ μ„¤λ…ν•΄μ£Όμ‹¤ μ μλ‚μ”? |
| 9 | λ‹¤μ¤‘ νƒ€μ… νλΌλ―Έν„°λ¥Ό κ°€μ§€λ” μ λ„¤λ¦­ ν΄λμ¤λ¥Ό μ„¤κ³„ν•  λ•μ μ£Όμμ μ€ λ¬΄μ—‡μΈκ°€μ”? |
| 10 | μ λ„¤λ¦­μ„ μ‚¬μ©ν•¨μΌλ΅μ¨ νƒ€μ… λ³€ν™μ΄ ν•„μ” μ—†κ² λλ” μ΄μ μ™€ μ΄κ²ƒμ΄ ν”„λ΅κ·Έλ¨μ— μ–΄λ–¤ μν–¥μ„ λ―ΈμΉλ”μ§€ μ„¤λ…ν•  μ μλ‚μ”? |

## λ°°μ΄μ /νλ“¤μ—λμ 

1. `try-with-resources` κΈ°λ¥μ„ μ΄μ©ν•λ©΄ μ½”λ“μ κ°„κ²°μ„±κ³Ό μ•μ „μ„±μ„ λ†’μΌ μ μλ‹¤λ”κ±Έ λλ‚.
2. μ λ„¤λ¦­μ„ μ΄μ©ν•λ©΄ μ½”λ“μ μ¬μ‚¬μ©μ„±κ³Ό κ°€λ…μ„±μ„ λ†’μΌ μ μμ–΄μ„ κ°λ° μƒμ‚°μ„±μ„ ν–¥μƒμ‹ν‚¬ μ μλ‹¤λ” κ²ƒμ„ ν•™μµ.